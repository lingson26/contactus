<section class="card" aria-label="ë„ì… ë¬¸ì˜ í¼">
  <div class="cardTop">
    <h2>ì»¨ì„¤íŒ… ìƒë‹´</h2>
    <p>í•„ìˆ˜ í•­ëª©ë§Œ ì…ë ¥í•˜ë©´ ìš´ì˜ ì „ë¬¸ ë‹´ë‹¹ìê°€ ì˜ì—…ì¼ ê¸°ì¤€ 1ì¼ ì´ë‚´ ì—°ë½ë“œë ¤ìš”.</p>
  </div>

  <form id="leadLiteForm" class="form">
    <!-- ë¬¸ì˜ êµ¬ë¶„ -->
    <div class="field">
      <div class="fieldHead">
        <label class="label">ë¬¸ì˜ êµ¬ë¶„ <span class="req">*</span></label>
        <div class="hint">ë¬¸ì˜ êµ¬ë¶„ì„ ì„ íƒí•˜ì„¸ìš”</div>
      </div>

      <div class="chipGroup" role="group" aria-label="ë¬¸ì˜ êµ¬ë¶„ ì„ íƒ">
        <label class="chipCheck">
          <input type="checkbox" name="topic" value="ì»¤ë®¤ë‹ˆí‹° ì‹œì„¤ ìš´ì˜" />
          <span>ì»¤ë®¤ë‹ˆí‹° ì‹œì„¤ ìš´ì˜</span>
        </label>

        <label class="chipCheck">
          <input type="checkbox" name="topic" value="ì»¤ë®¤ë‹ˆí‹° ì‹œì„¤ ê³µì‚¬" />
          <span>ì»¤ë®¤ë‹ˆí‹° ì‹œì„¤ ê³µì‚¬</span>
        </label>

        <label class="chipCheck">
          <input type="checkbox" name="topic" value="ê¸°íƒ€" />
          <span>ê¸°íƒ€</span>
        </label>
      </div>

      <div class="error" id="topicError" aria-live="polite"></div>
    </div>


    <!-- ì—°ë½ì²˜ -->
    <div class="field">
      <div class="fieldHead">
        <label class="label" for="contact">ì—°ë½ì²˜ <span class="req">*</span></label>
        <div class="hint">ì—°ë½ ë°›ìœ¼ì‹¤ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
      </div>
      <input id="contact" name="contact" type="tel" inputmode="tel"
             placeholder="010-1234-5678" required />
      <div class="error" id="contactError" aria-live="polite"></div>
    </div>

    <!-- ë¬¸ì˜ì‚¬í•­ -->
    <div class="field">
      <div class="fieldHead">
        <label class="label" for="message">ë¬¸ì˜ì‚¬í•­</label>
        <div class="hint">ì„¸ëŒ€ìˆ˜/ë‹¨ì§€ëª…/ë¬¸ì˜ì‚¬í•­ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</div>
      </div>
      <textarea id="message" name="message" rows="7"
                placeholder="ì˜ˆ) 800ì„¸ëŒ€, OOì•„íŒŒíŠ¸ / ì»¤ë®¤ë‹ˆí‹° ì˜ˆì•½(ê³¨í”„ì—°ìŠµì¥) ìš´ì˜ ë°©ì‹ ìƒë‹´ ì›í•©ë‹ˆë‹¤."></textarea>
    </div>

<!-- ë™ì˜ --> 
<label class="consent"> 
<input type="checkbox" id="consent" required />

 <div class="consent-wrap"> 
<div class="consent-main"> 

<b>[í•„ìˆ˜]</b> ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
<em>ìƒë‹´ ì™¸ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šì•„ìš”.</em>


</div>
</div> </div> </label>

    <button type="submit" class="submit" id="submitBtn" disabled>ì»¨ì„¤íŒ… ì‹ ì²­í•˜ê¸°</button>
  </form>
</section>

<style>
  :root{
    --panel:#fff;
    --text:#0f172a;
    --muted:#64748b;
    --line:#e6eaf2;
    --brand:#2563eb;
    --danger:#ef4444;
    --radius:18px;
    --shadow: 0 18px 60px rgba(15, 23, 42, 0.08);
  }

  .card{
    background: var(--panel);
    border: 1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 26px;
  }

  .cardTop h2{ margin:0; font-size:28px; letter-spacing:-0.3px; }
  .cardTop p{ margin:8px 0 0; color:var(--muted); font-size:13px; line-height:1.5; }

  .form{ margin-top: 14px; }
  .field{ margin-top: 16px; }

  .fieldHead{
    display:flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 8px;
  }
  .label{
    font-size: 17px;
    color: var(--muted);
    font-weight: 900;
    letter-spacing: -0.1px;
  }
  .hint{
    font-size: 12px;
    color: #94a3b8;
    font-weight: 700;
    text-align: right;
  }
  .req{ color: var(--danger); }

  input[type="tel"], textarea{
    width:100%;
    border:1px solid var(--line);
    border-radius: 14px;
    padding: 13px 14px;
    outline: none;
    font-size: 14px;
    color: var(--text);
    transition: .15s ease;
    background:#fff;
  }
  textarea{ resize: vertical; min-height: 140px; }
  input::placeholder, textarea::placeholder{ color:#94a3b8; }

  input:focus, textarea:focus{
    border-color: rgba(37,99,235,0.45);
    box-shadow: 0 0 0 5px rgba(37,99,235,0.10);
  }

  .chipGroup{ display:flex; flex-wrap:wrap; gap:10px; }
  .chipCheck{
    display:inline-flex; align-items:center; gap:8px;
    border:1px solid var(--line);
    border-radius:999px;
    padding:10px 12px;
    cursor:pointer;
    user-select:none;
    background:#fff;
    transition:.15s ease;
    font-weight:900;
    color:#334155;
    font-size:13px;
  }
  .chipCheck input{ width:16px; height:16px; accent-color: var(--brand); margin:0; }
  .chipCheck:hover{ border-color:#cbd5e1; }
  .chipCheck.active{
    border-color: rgba(37,99,235,0.30);
    background: rgba(37,99,235,0.10);
    color:#1d4ed8;
  }

  .error{
    min-height: 18px;
    margin-top: 6px;
    font-size: 12px;
    color: var(--danger);
    font-weight: 200;
  }
  .invalid{
    border-color: rgba(239,68,68,0.55) !important;
    box-shadow: 0 0 0 5px rgba(239,68,68,0.08) !important;
  }

  .consent{
    display:flex;
    gap:10px;
    align-items:flex-start;
    margin-top:16px;
    padding:12px 12px;
    border:1px solid var(--line);
    border-radius:14px;
    background:#fafcff;
    font-size:12.5px;
    color:#334155;
    line-height:1.5;
    font-weight:800;
    cursor:pointer;
    user-select:none;
  }
  .consent input{ margin-top:2px; width:18px; height:18px; accent-color: var(--brand); }
  .consent em{ color: var(--muted); font-style: normal; font-weight: 700; }

  .submit{
    margin-top: 14px;
    width:100%;
    padding:14px 14px;
    border-radius:14px;
    border:0;
    font-weight:950;
    font-size:15px;
    cursor:pointer;
    background:#e2e8f0;
    color:#64748b;
    transition:.15s ease;
  }
  .submit.enabled{
    background: var(--brand);
    color:#fff;
    box-shadow: 0 14px 30px rgba(37,99,235,0.25);
  }
  .submit.enabled:hover{ filter: brightness(0.98); transform: translateY(-1px); }
</style>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script>
  // âœ… 1) ì—¬ê¸° 3ê°œë§Œ ë„ˆ ê°’ìœ¼ë¡œ ë°”ê¿”ì¤˜
  const EMAILJS_PUBLIC_KEY = "jyrL0ikUigwhOgnSu";
  const EMAILJS_SERVICE_ID = "service_7eg3e18";
  const EMAILJS_TEMPLATE_ID = "template_wjlukpk";

  emailjs.init(EMAILJS_PUBLIC_KEY);
  const form = document.getElementById("leadLiteForm");
  const submitBtn = document.getElementById("submitBtn");
  const consent = document.getElementById("consent");

  const topicError = document.getElementById("topicError");
  const contact = document.getElementById("contact");
  const contactError = document.getElementById("contactError");

  const chipLabels = Array.from(document.querySelectorAll(".chipCheck"));
  const topicInputs = Array.from(document.querySelectorAll('input[name="topic"]'));

  // ì¹© active ìŠ¤íƒ€ì¼ í† ê¸€
  function syncChipActive(){
    chipLabels.forEach(label => {
      const input = label.querySelector("input");
      label.classList.toggle("active", input.checked);
    });
  }
  chipLabels.forEach(label => label.addEventListener("click", () => {
    requestAnimationFrame(() => {
      syncChipActive();
      validateAndToggle();
    });
  }));

  // ì „í™”ë²ˆí˜¸ ìœ íš¨ì„±(ë„ˆë¬´ ë¹¡ì„¸ì§€ ì•Šê²Œ)
  function isPhoneLike(v){
    const s = (v || "").trim();
    if (!s) return false;
    if (!/^[0-9\s\-()+]+$/.test(s)) return false;
    const digits = s.replace(/\D/g, "");
    return digits.length >= 9;
  }

  function validateTopics(){
    const anyChecked = topicInputs.some(i => i.checked);
    topicError.textContent = anyChecked ? "" : "ë¬¸ì˜ êµ¬ë¶„ì„ 1ê°œ ì´ìƒ ì„ íƒí•´ ì£¼ì„¸ìš”.";
    return anyChecked;
  }

  function validateContact(){
    const ok = isPhoneLike(contact.value);
    contact.classList.toggle("invalid", !ok && contact.value.trim().length > 0);
    contactError.textContent = ok || contact.value.trim().length === 0 ? "" : "ì—°ë½ì²˜ í˜•ì‹ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.";
    return ok;
  }

  function validateAndToggle(){
    const topicsOk = validateTopics();
    const contactOk = isPhoneLike(contact.value);
    const consentOk = consent.checked;

    const enabled = topicsOk && contactOk && consentOk;
    submitBtn.disabled = !enabled;
    submitBtn.classList.toggle("enabled", enabled);
  }

  form.addEventListener("input", () => {
    validateContact();
    validateAndToggle();
  });
  form.addEventListener("change", () => {
    syncChipActive();
    validateContact();
    validateAndToggle();
  });

  // âœ… ì œì¶œ â†’ EmailJSë¡œ ë©”ì¼ ì „ì†¡
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const topicsOk = validateTopics();
    const contactOk = validateContact();
    const consentOk = consent.checked;

    if (!topicsOk || !contactOk || !consentOk) {
      validateAndToggle();
      return;
    }

    const topics = topicInputs.filter(i => i.checked).map(i => i.value);
    const data = Object.fromEntries(new FormData(form).entries());

    const templateParams = {
      topics: topics.join(", "),
      contact: (data.contact || "").trim(),
      message: (data.message || "").trim() || "(ë¯¸ì…ë ¥)"
    };

    const oldText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = "ì „ì†¡ ì¤‘â€¦";

    try {
      await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams);

      alert("ë„ì… ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! ë‹´ë‹¹ìê°€ ë¹ ë¥´ê²Œ ì—°ë½ë“œë¦´ê²Œìš” ğŸ˜Š");
      form.reset();
      syncChipActive();
      validateAndToggle();

    } catch (err) {
      console.error("EmailJS error:", err);
      const msg = err?.text || err?.message || JSON.stringify(err);
      alert("ì „ì†¡ ì‹¤íŒ¨ ğŸ˜¢\n" + msg);
    } finally {
      submitBtn.textContent = oldText;
      validateAndToggle();
    }
  });

  // init
  syncChipActive();
  validateAndToggle();

</script>









